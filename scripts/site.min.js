jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeInOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n}});(function(e,t,n,r){function d(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="stellar",s={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(e){e.hide()},showElement:function(e){e.show()}},o={scroll:{getLeft:function(e){return e.scrollLeft()},setLeft:function(e,t){e.scrollLeft(t)},getTop:function(e){return e.scrollTop()},setTop:function(e,t){e.scrollTop(t)}},position:{getLeft:function(e){return parseInt(e.css("left"),10)*-1},getTop:function(e){return parseInt(e.css("top"),10)*-1}},margin:{getLeft:function(e){return parseInt(e.css("margin-left"),10)*-1},getTop:function(e){return parseInt(e.css("margin-top"),10)*-1}},transform:{getLeft:function(e){var t=getComputedStyle(e[0])[f];return t!=="none"?parseInt(t.match(/(-?[0-9]+)/g)[4],10)*-1:0},getTop:function(e){var t=getComputedStyle(e[0])[f];return t!=="none"?parseInt(t.match(/(-?[0-9]+)/g)[5],10)*-1:0}}},u={position:{setLeft:function(e,t){e.css("left",t)},setTop:function(e,t){e.css("top",t)}},transform:{setPosition:function(e,t,n,r,i){e[0].style[f]="translate3d("+(t-n)+"px, "+(r-i)+"px, 0)"}}},a=function(){var t=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,n=e("script")[0].style,r="",i;for(i in n)if(t.test(i)){r=i.match(t)[0];break}"WebkitOpacity"in n&&(r="Webkit");"KhtmlOpacity"in n&&(r="Khtml");return function(e){return r+(r.length>0?e.charAt(0).toUpperCase()+e.slice(1):e)}}(),f=a("transform"),l=e("<div />",{style:"background:#fff"}).css("background-position-x")!==r,c=l?function(e,t,n){e.css({"background-position-x":t,"background-position-y":n})}:function(e,t,n){e.css("background-position",t+" "+n)},h=l?function(e){return[e.css("background-position-x"),e.css("background-position-y")]}:function(e){return e.css("background-position").split(" ")},p=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};d.prototype={init:function(){this.options.name=i+"_"+Math.floor(Math.random()*1e9);this._defineElements();this._defineGetters();this._defineSetters();this._handleWindowLoadAndResize();this._detectViewport();this.refresh({firstLoad:!0});this.options.scrollProperty==="scroll"?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===n.body&&(this.element=t);this.$scrollElement=e(this.element);this.$element=this.element===t?e("body"):this.$scrollElement;this.$viewportElement=this.options.viewportElement!==r?e(this.options.viewportElement):this.$scrollElement[0]===t||this.options.scrollProperty==="scroll"?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var e=this,t=o[e.options.scrollProperty];this._getScrollLeft=function(){return t.getLeft(e.$scrollElement)};this._getScrollTop=function(){return t.getTop(e.$scrollElement)}},_defineSetters:function(){var t=this,n=o[t.options.scrollProperty],r=u[t.options.positionProperty],i=n.setLeft,s=n.setTop;this._setScrollLeft=typeof i=="function"?function(e){i(t.$scrollElement,e)}:e.noop;this._setScrollTop=typeof s=="function"?function(e){s(t.$scrollElement,e)}:e.noop;this._setPosition=r.setPosition||function(e,n,i,s,o){t.options.horizontalScrolling&&r.setLeft(e,n,i);t.options.verticalScrolling&&r.setTop(e,s,o)}},_handleWindowLoadAndResize:function(){var n=this,r=e(t);n.options.responsive&&r.bind("load."+this.name,function(){n.refresh()});r.bind("resize."+this.name,function(){n._detectViewport();n.options.responsive&&n.refresh()})},refresh:function(n){var r=this,i=r._getScrollLeft(),s=r._getScrollTop();(!n||!n.firstLoad)&&this._reset();this._setScrollLeft(0);this._setScrollTop(0);this._setOffsets();this._findParticles();this._findBackgrounds();n&&n.firstLoad&&/WebKit/.test(navigator.userAgent)&&e(t).load(function(){var e=r._getScrollLeft(),t=r._getScrollTop();r._setScrollLeft(e+1);r._setScrollTop(t+1);r._setScrollLeft(e);r._setScrollTop(t)});this._setScrollLeft(i);this._setScrollTop(s)},_detectViewport:function(){var e=this.$viewportElement.offset(),t=e!==null&&e!==r;this.viewportWidth=this.$viewportElement.width();this.viewportHeight=this.$viewportElement.height();this.viewportOffsetTop=t?e.top:0;this.viewportOffsetLeft=t?e.left:0},_findParticles:function(){var t=this,n=this._getScrollLeft(),i=this._getScrollTop();if(this.particles!==r)for(var s=this.particles.length-1;s>=0;s--)this.particles[s].$element.data("stellar-elementIsActive",r);this.particles=[];if(!this.options.parallaxElements)return;this.$element.find("[data-stellar-ratio]").each(function(n){var i=e(this),s,o,u,a,f,l,c,h,p,d=0,v=0,m=0,g=0;if(!i.data("stellar-elementIsActive"))i.data("stellar-elementIsActive",this);else if(i.data("stellar-elementIsActive")!==this)return;t.options.showElement(i);if(!i.data("stellar-startingLeft")){i.data("stellar-startingLeft",i.css("left"));i.data("stellar-startingTop",i.css("top"))}else{i.css("left",i.data("stellar-startingLeft"));i.css("top",i.data("stellar-startingTop"))}u=i.position().left;a=i.position().top;f=i.css("margin-left")==="auto"?0:parseInt(i.css("margin-left"),10);l=i.css("margin-top")==="auto"?0:parseInt(i.css("margin-top"),10);h=i.offset().left-f;p=i.offset().top-l;i.parents().each(function(){var t=e(this);if(t.data("stellar-offset-parent")===!0){d=m;v=g;c=t;return!1}m+=t.position().left;g+=t.position().top});s=i.data("stellar-horizontal-offset")!==r?i.data("stellar-horizontal-offset"):c!==r&&c.data("stellar-horizontal-offset")!==r?c.data("stellar-horizontal-offset"):t.horizontalOffset;o=i.data("stellar-vertical-offset")!==r?i.data("stellar-vertical-offset"):c!==r&&c.data("stellar-vertical-offset")!==r?c.data("stellar-vertical-offset"):t.verticalOffset;t.particles.push({$element:i,$offsetParent:c,isFixed:i.css("position")==="fixed",horizontalOffset:s,verticalOffset:o,startingPositionLeft:u,startingPositionTop:a,startingOffsetLeft:h,startingOffsetTop:p,parentOffsetLeft:d,parentOffsetTop:v,stellarRatio:i.data("stellar-ratio")!==r?i.data("stellar-ratio"):1,width:i.outerWidth(!0),height:i.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var t=this,n=this._getScrollLeft(),i=this._getScrollTop(),s;this.backgrounds=[];if(!this.options.parallaxBackgrounds)return;s=this.$element.find("[data-stellar-background-ratio]");this.$element.data("stellar-background-ratio")&&(s=s.add(this.$element));s.each(function(){var s=e(this),o=h(s),u,a,f,l,p,d,v,m,g,y=0,b=0,w=0,E=0;if(!s.data("stellar-backgroundIsActive"))s.data("stellar-backgroundIsActive",this);else if(s.data("stellar-backgroundIsActive")!==this)return;if(!s.data("stellar-backgroundStartingLeft")){s.data("stellar-backgroundStartingLeft",o[0]);s.data("stellar-backgroundStartingTop",o[1])}else c(s,s.data("stellar-backgroundStartingLeft"),s.data("stellar-backgroundStartingTop"));p=s.css("margin-left")==="auto"?0:parseInt(s.css("margin-left"),10);d=s.css("margin-top")==="auto"?0:parseInt(s.css("margin-top"),10);v=s.offset().left-p-n;m=s.offset().top-d-i;s.parents().each(function(){var t=e(this);if(t.data("stellar-offset-parent")===!0){y=w;b=E;g=t;return!1}w+=t.position().left;E+=t.position().top});u=s.data("stellar-horizontal-offset")!==r?s.data("stellar-horizontal-offset"):g!==r&&g.data("stellar-horizontal-offset")!==r?g.data("stellar-horizontal-offset"):t.horizontalOffset;a=s.data("stellar-vertical-offset")!==r?s.data("stellar-vertical-offset"):g!==r&&g.data("stellar-vertical-offset")!==r?g.data("stellar-vertical-offset"):t.verticalOffset;t.backgrounds.push({$element:s,$offsetParent:g,isFixed:s.css("background-attachment")==="fixed",horizontalOffset:u,verticalOffset:a,startingValueLeft:o[0],startingValueTop:o[1],startingBackgroundPositionLeft:isNaN(parseInt(o[0],10))?0:parseInt(o[0],10),startingBackgroundPositionTop:isNaN(parseInt(o[1],10))?0:parseInt(o[1],10),startingPositionLeft:s.position().left,startingPositionTop:s.position().top,startingOffsetLeft:v,startingOffsetTop:m,parentOffsetLeft:y,parentOffsetTop:b,stellarRatio:s.data("stellar-background-ratio")===r?1:s.data("stellar-background-ratio")})})},_reset:function(){var e,t,n,r,i;for(i=this.particles.length-1;i>=0;i--){e=this.particles[i];t=e.$element.data("stellar-startingLeft");n=e.$element.data("stellar-startingTop");this._setPosition(e.$element,t,t,n,n);this.options.showElement(e.$element);e.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null)}for(i=this.backgrounds.length-1;i>=0;i--){r=this.backgrounds[i];r.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null);c(r.$element,r.startingValueLeft,r.startingValueTop)}},destroy:function(){this._reset();this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name);this._animationLoop=e.noop;e(t).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var n=this,r=e(t);r.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name);if(typeof this.options.horizontalOffset=="function"){this.horizontalOffset=this.options.horizontalOffset();r.bind("resize.horizontal-"+this.name,function(){n.horizontalOffset=n.options.horizontalOffset()})}else this.horizontalOffset=this.options.horizontalOffset;if(typeof this.options.verticalOffset=="function"){this.verticalOffset=this.options.verticalOffset();r.bind("resize.vertical-"+this.name,function(){n.verticalOffset=n.options.verticalOffset()})}else this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var e=this._getScrollLeft(),t=this._getScrollTop(),n,r,i,s,o,u,a,f=!0,l=!0,h,p,d,v,m;if(this.currentScrollLeft===e&&this.currentScrollTop===t&&this.currentWidth===this.viewportWidth&&this.currentHeight===this.viewportHeight)return;this.currentScrollLeft=e;this.currentScrollTop=t;this.currentWidth=this.viewportWidth;this.currentHeight=this.viewportHeight;for(m=this.particles.length-1;m>=0;m--){i=this.particles[m];s=i.isFixed?1:0;if(this.options.horizontalScrolling){h=(e+i.horizontalOffset+this.viewportOffsetLeft+i.startingPositionLeft-i.startingOffsetLeft+i.parentOffsetLeft)*-(i.stellarRatio+s-1)+i.startingPositionLeft;d=h-i.startingPositionLeft+i.startingOffsetLeft}else{h=i.startingPositionLeft;d=i.startingOffsetLeft}if(this.options.verticalScrolling){p=(t+i.verticalOffset+this.viewportOffsetTop+i.startingPositionTop-i.startingOffsetTop+i.parentOffsetTop)*-(i.stellarRatio+s-1)+i.startingPositionTop;v=p-i.startingPositionTop+i.startingOffsetTop}else{p=i.startingPositionTop;v=i.startingOffsetTop}if(this.options.hideDistantElements){l=!this.options.horizontalScrolling||d+i.width>(i.isFixed?0:e)&&d<(i.isFixed?0:e)+this.viewportWidth+this.viewportOffsetLeft;f=!this.options.verticalScrolling||v+i.height>(i.isFixed?0:t)&&v<(i.isFixed?0:t)+this.viewportHeight+this.viewportOffsetTop}if(l&&f){if(i.isHidden){this.options.showElement(i.$element);i.isHidden=!1}this._setPosition(i.$element,h,i.startingPositionLeft,p,i.startingPositionTop)}else if(!i.isHidden){this.options.hideElement(i.$element);i.isHidden=!0}}for(m=this.backgrounds.length-1;m>=0;m--){o=this.backgrounds[m];s=o.isFixed?0:1;u=this.options.horizontalScrolling?(e+o.horizontalOffset-this.viewportOffsetLeft-o.startingOffsetLeft+o.parentOffsetLeft-o.startingBackgroundPositionLeft)*(s-o.stellarRatio)+"px":o.startingValueLeft;a=this.options.verticalScrolling?(t+o.verticalOffset-this.viewportOffsetTop-o.startingOffsetTop+o.parentOffsetTop-o.startingBackgroundPositionTop)*(s-o.stellarRatio)+"px":o.startingValueTop;c(o.$element,u,a)}},_handleScrollEvent:function(){var e=this,t=!1,n=function(){e._repositionElements();t=!1},r=function(){if(!t){p(n);t=!0}};this.$scrollElement.bind("scroll."+this.name,r);r()},_startAnimationLoop:function(){var e=this;this._animationLoop=function(){p(e._animationLoop);e._repositionElements()};this._animationLoop()}};e.fn[i]=function(t){var n=arguments;if(t===r||typeof t=="object")return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new d(this,t))});if(typeof t=="string"&&t[0]!=="_"&&t!=="init")return this.each(function(){var r=e.data(this,"plugin_"+i);r instanceof d&&typeof r[t]=="function"&&r[t].apply(r,Array.prototype.slice.call(n,1));t==="destroy"&&e.data(this,"plugin_"+i,null)})};e[i]=function(n){var r=e(t);return r.stellar.apply(r,Array.prototype.slice.call(arguments,0))};e[i].scrollProperty=o;e[i].positionProperty=u;t.Stellar=d})(jQuery,this,document);+function(e){"use strict";function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(n).is("body")?e(window):e(n);this.$body=e("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s);this.options=e.extend({},t.DEFAULTS,r);this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" a";this.offsets=e([]);this.targets=e([]);this.activeTarget=null;this.refresh();this.process()}t.DEFAULTS={offset:10};t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]);this.targets=e([]);var n=this,r=this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#\w/.test(i)&&e(i);return s&&s.length&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]);n.targets.push(this[1])})};t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])};t.prototype.activate=function(t){this.activeTarget=t;e(this.selector).siblings(".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).addClass("active");r.trigger("activate.bs.scrollspy")};e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s));typeof n=="string"&&i[n]()})};e.fn.scrollspy.Constructor=t;e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery);var CK=function(){function a(){var t=m();r.css("margin-top",t);if(v()){r.scrollspy({target:"#nav",offset:t});setTimeout(function(){r.scrollspy("refresh")},50);$(document).load(function(){r.scrollspy("refresh")})}else{r.removeData("bs.scrollspy").off("scroll.bs.scroll-spy.data-api");s.removeClass("active")}var i=n.height()-t;e?o.not(".photo-section").css("min-height",i):o.css("min-height",i);var u=$("#wedding-info-date, #wedding-info-remaining-days");u.removeAttr("style");if(v()){var a=0;u.each(function(){a=Math.max(a,$(this).height())});u.height(a)}}function f(){var e="click.nav";s.off(e).on(e,function(e){e.preventDefault();var t=$($(this).attr("href")),n=t.position().top-m()+1;r.add("html").stop().animate({scrollTop:n},2500,u)});$("#title").off(e).on(e,function(){s.first().triggerHandler(e)})}function l(){e?o.filter(".photo-section").removeAttr("style").each(function(){var e=$(this).css("background-image").replace(/^url\((.*)\)/,"$1");$(this).css("background-image","none").find(".js-mobile-image").removeClass("hide").attr("src",e)}):n.stellar({responsive:!0,horizontalScrolling:!1,parallaxElements:!1})}function c(){var t=null;n.on("resize",function(){clearTimeout(t);t=setTimeout(function(){a();f();e||n.stellar("refresh")},300)})}function h(){var e=new Date,t=new Date(2014,6,19),n=t.getTime()-e.getTime(),r=Math.ceil(n/1e3/60/60/24);if(r<0)$("#js-wedding-past").removeClass("hide");else if(r===0)$("#js-wedding-today").removeClass("hide");else if(r===1)$("#js-wedding-tomorrow").removeClass("hide");else{$("#js-wedding-future").removeClass("hide");$("#js-remaining-days").text(r)}}function p(){if(e||t){var n=$("#wedding-info .wedding-party-person"),i=n.find(".wedding-party-info").add("#wedding-party-backdrop");n.find(".wedding-party-more,.wedding-party-img,.wedding-party-name").click(function(t){t.preventDefault();$(this).siblings(".wedding-party-info").add("#wedding-party-backdrop").show();$(document).on("touchmove",function(e){e.preventDefault()});if(e){r[0].style.display="none";r[0].offsetHeight;r[0].style.display="block"}});i.on("click",function(){i.hide();$(document).off("touchmove")})}}function d(){function f(e,t){var n=e.find(":input"),r=n.filter(":submit"),i="originalText";clearTimeout(a);a=setTimeout(function(){n.prop("disabled",t);if(t){r.data(i,r.val());r.val("Saving...")}else{var e=r.data(i);e&&r.val(e)}},t?200:0)}function l(t){var n="has-error",s="validation-msg",o=t.validation;i.closest(".form-group").removeClass(n).find("."+s).remove();for(var u=0;u<o.length;u++){var a=o[u],f=i.filter("#"+a.field);a.valid||f.closest(".form-group").addClass(n).append("<div class='help-block "+s+"'>"+a.msg+"</div>")}e.find("."+n).first().find(":input").focus();v&&r.scrollspy("refresh")}function c(e,t){console&&!t&&console.error(e);var n=t?e:"There was an error saving your RSVP!<br/>Please try again later, but let us know that you had a problem!";$("#js-rsvp-error").html(n);var r=$("#error-display, #error-backdrop");r.fadeIn(s).one("click",function(){r.fadeOut(s)})}function h(){o=!0;e.add(t).hide();n.removeClass("hide").show();$("#js-make-change").show();i.filter("select,textarea,:text").val("");r.stop().animate({scrollTop:$("#rsvp").offset().top-m()},s,u);v&&r.scrollspy("refresh")}var e=$("#js-rsvp-form"),t=$("#js-rsvp-change"),n=$("#js-rsvp-success"),i=e.add(t).find(":input").not(":submit,button"),s=400,o=Boolean(b(g))==1;if(o){e.hide();n.removeClass("hide")}$("#attendance_details").on("change",function(){var e=$(this).children("[value='"+this.value+"']").data("accept");$("#js-plus-one").toggle(e);v&&r.scrollspy("refresh");e||$("#js-plus-one").find(":radio[value='false']").prop("checked",!0)});e.on("submit",function(t){t.preventDefault();f(e,!0);var n=$(this).serialize(),r=$(this).attr("action");$.ajax({type:"POST",url:r,data:n,success:function(t,n,r){try{f(e,!1);var i=$.parseJSON(t);l(i);if(i.allValid)if(i.rsvp.sent&&i.rsvp.saved){y(g,!0);h()}else c(i.rsvp.msg,!0)}catch(s){c(s,!1)}},error:function(t,n,r,i){f(e,!1);c(i,!0)}})});$("#js-make-change").on("click",function(i){i.preventDefault();$(this).add(e).add(n).hide();t.removeClass("hide").show();v&&r.scrollspy("refresh")});$("#js-no-change").on("click",function(i){i.preventDefault();t.addClass("hide");$("#js-make-change").show();o?n.removeClass("hide").show():e.show();v&&r.scrollspy("refresh")});t.on("submit",function(e){e.preventDefault();f(t,!0);var n=$(this).serialize()+"&change=true",r=$(this).attr("action");$.ajax({type:"POST",url:r,data:n,success:function(e,n,r){try{f(t,!1);var i=$.parseJSON(e);l(i);i.allValid&&(i.rsvp.sent?h():c(i.rsvp.msg,!0))}catch(s){c(s,!1)}},error:function(e,n,r,i){f(t,!1);c(i,!0)}})});var a=null}function v(){return i.css("position")==="fixed"}function m(){return topMargin=v()?i.outerHeight():0}function y(e,t){var n=new Date;n.setTime(n.getTime()+31536e6);var r="; expires="+n.toGMTString();document.cookie=e+"="+t+r+"; path=/"}function b(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null}var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile|Windows Phone|Zune/i.test(navigator.userAgent),t=!e&&/msie [678]/i.test(navigator.userAgent),n=$([]),r=$([]),i=$([]),s=$([]),o=$([]),u="easeInOutQuad",g="RSVP";$(function(){n=$(window);r=$("body");i=$("#header");s=$("#nav a");o=$(".main-section");r.addClass("device-type-"+(e?"mobile":"desktop"));r.addClass(t?"browser-bad":"browser-good");a();f();l();c();h();p();d()});return{reset:function(){y(g,"",-1)}}}();